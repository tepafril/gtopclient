{"version":3,"sources":["src/app/pages/device/device.page.html","src/app/pages/device/device-routing.module.ts","src/app/pages/device/device.module.ts","src/app/pages/device/device.page.scss","src/app/pages/device/device.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header no-border>\\n  <ion-toolbar  color=\\\"primary\\\" mode=\\\"ios\\\">\\n\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"goBack()\\\">\\n        <ion-icon class=\\\"bell-button\\\" src=\\\"assets/themify-icons/SVG/arrow-left.svg\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n\\n    <ion-title>\\n      {{ 'APP.my_devices' | translate }}\\n    </ion-title>\\n\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n    <ion-searchbar></ion-searchbar>\\n    <ion-list *ngFor=\\\"let device of devices\\\">\\n    \\n      <ion-item>\\n        <ion-avatar slot=\\\"start\\\">\\n          <img src=\\\"assets/google/marker/{{ device.icon_name }}.png\\\">\\n        </ion-avatar>\\n        <ion-label><ion-text color=\\\"primary\\\">{{ device.plate }}</ion-text></ion-label>\\n      </ion-item>\\n\\n      <ion-item>\\n        <ion-col size=\\\"3\\\"><ion-label><ion-text color=\\\"dark\\\">IMEI</ion-text></ion-label></ion-col>\\n        <ion-col size=\\\"9\\\"><ion-label class=\\\"ion-text-wrap\\\">{{ device.imei }}</ion-label></ion-col>\\n      </ion-item>\\n\\n      <ion-item>\\n        <ion-col size=\\\"3\\\"><ion-label><ion-text color=\\\"dark\\\">Name</ion-text></ion-label></ion-col>\\n        <ion-col size=\\\"9\\\"><ion-label class=\\\"ion-text-wrap\\\">{{ device.name }}</ion-label></ion-col>\\n      </ion-item>\\n\\n      <ion-item>\\n        <ion-col size=\\\"3\\\"><ion-label><ion-text color=\\\"dark\\\">Sim</ion-text></ion-label></ion-col>\\n        <ion-col size=\\\"9\\\"><ion-label class=\\\"ion-text-wrap\\\">{{ device.phone }}</ion-label></ion-col>\\n      </ion-item>\\n\\n      <ion-item>\\n        <ion-col size=\\\"3\\\"><ion-label><ion-text color=\\\"dark\\\">Since</ion-text></ion-label></ion-col>\\n        <ion-col size=\\\"9\\\"><ion-label class=\\\"ion-text-wrap\\\">{{ readableLocalDate(device.created_at) }} {{ readableLocalTime(device.created_at) }}</ion-label></ion-col>\\n      </ion-item>\\n\\n    </ion-list>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DevicePage } from './device.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DevicePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DevicePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DevicePageRoutingModule } from './device-routing.module';\n\nimport { DevicePage } from './device.page';\n\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DevicePageRoutingModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [DevicePage]\n})\nexport class DevicePageModule {}\n","export default \"ion-avatar img {\\n  background-color: #777;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90ZXBhZnJpbC9Eb2N1bWVudHMvZ29vZ2xlbWFwL3NyYy9hcHAvcGFnZXMvZGV2aWNlL2RldmljZS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2RldmljZS9kZXZpY2UucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksc0JBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2RldmljZS9kZXZpY2UucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWF2YXRhciBpbWd7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzc3Nztcbn0iLCJpb24tYXZhdGFyIGltZyB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM3Nzc7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { Platform, NavController,AlertController } from \"@ionic/angular\";\nimport { LoadingController } from '@ionic/angular';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { tap } from 'rxjs/operators';\nimport { ENDPOINT } from '../../../environments/environment';\nimport { AlertService } from 'src/app/services/alert.service';\nimport { TraccarService } from 'src/app/services/traccar.service';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'app-device',\n  templateUrl: './device.page.html',\n  styleUrls: ['./device.page.scss'],\n})\nexport class DevicePage implements OnInit {\n\n  loading:any;\n  httpResponse;\n  devices;\n\n  constructor( \n    private http: HttpClient,\n    private authService: AuthService,\n    private navCtrl: NavController,\n    public loadingController: LoadingController,\n    public alertController: AlertController,\n    private alertService: AlertService,\n    private traccarService: TraccarService,\n    private lang: TranslateService,\n    public platform: Platform,\n   ) { }\n\n  ngOnInit() {\n  }\n\n  ionViewWillEnter(){\n    this.presentLoadingWithOptions();\n    this.prepareQuery();\n  }\n\n  prepareQuery(){\n\n    this.traccarService.getMyDevices().subscribe(res => {\n      this.httpResponse = res;\n      this.devices = this.httpResponse.items;\n    }, err => {\n      if( err.error.message ){\n        this.alertService.presentToast( err.error.message ,\"danger\");\n      }\n      else{\n        this.alertService.presentToast( err.message ,\"danger\");\n      }\n      this.loading.dismiss();\n    }, ()=>{\n      console.log(this.httpResponse);\n      this.loading.dismiss();\n    });\n  }\n\n  goBack(){\n    this.navCtrl.navigateBack('dashboard/tabs/home');\n  }\n\n  async presentLoadingWithOptions() {\n    this.loading = await this.loadingController.create({\n      duration: 15000,\n      message: 'Please wait...',\n      translucent: true,\n      cssClass: 'custom-class custom-loading'\n    });\n    return await this.loading.present();\n  }\n\n\n\n  public readableLocalDate( the_date )\n  {\n    let d:Date;\n    if(this.platform.is('ios')){\n      d = new Date( the_date.replace(' ', 'T'));\n    }\n    else{\n      d = new Date( the_date + ' UTC');\n    }\n\n    let dayNames = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n    let monthNames = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];\n\n    let s = ' ' + this.lang.instant('APP.day');\n    s += this.lang.instant('APP.' + dayNames[d.getDay()] );\n    if( d.getDate() < 10 ){\n      s += ' ' + this.lang.instant('APP.date') + '0' + d.getDate().toString();\n    }\n    else{\n      s += ' ' + this.lang.instant('APP.date') +  d.getDate().toString();\n    }\n    s += ' ' + this.lang.instant('APP.month') +  this.lang.instant('APP.' + monthNames[d.getMonth()] );\n    s += ' ' + this.lang.instant('APP.year') +  d.getFullYear();\n    return s;\n  }\n\n  public readableLocalTime( the_date )\n  {\n    let d:Date;\n    if(this.platform.is('ios')){\n      d = new Date( the_date.replace(' ', 'T'));\n    }\n    else{\n      d = new Date( the_date + ' UTC');\n    }\n    \n    let s = '';\n    if( d.getHours() < 10 ){\n      s += ' ' + this.lang.instant('APP.time') + '0' + d.getHours().toString();\n    }\n    else{\n      s += ' ' + this.lang.instant('APP.time') + d.getHours().toString();\n    }\n    if( d.getMinutes() < 10 ){\n      s += ':0' + d.getMinutes().toString();\n    }\n    else{\n      s += ':' + d.getMinutes().toString();\n    }\n    \n    return s;\n  }\n}\n"],"sourceRoot":"webpack:///","file":"pages-device-device-module-es5.js"}